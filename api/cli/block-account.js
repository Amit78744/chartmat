const db = require('../_utils/db')
const _ = require("lodash")
const coupons = ["65F8HZLH3",
    "4UURCJL15",
    "32F5EV586",
    "73D3EL9AS",
    "Y82P2360M",
    "OOG7WYAR1",
    "2H587W59I",
    "HSG2UTIG3",
    "MMKQRHBK7",
    "LJ8UBDXBT",
    "6ZIH30LYJ",
    "919BCXG5K",
    "QLAQRNZRD",
    "KWLRD6J25",
    "VUTFDV56L",
    "04X1HJFJM",
    "YN3Q11Y0B",
    "PGORNECCY",
    "1TMGJUMWY",
    "F26SQ0IK7",
    "50H0JSXC5",
    "R821OZKVS",
    "SDGPXVH2J",
    "DUTHT95GC",
    "QQVVRNQJ2",
    "QKXD9JP3U",
    "ZYWC53K12",
    "Z4A1PWKA8",
    "IFIQ2Y7P6",
    "U16Z95OK4",
    "4EK4LBF9A",
    "LGKRGMU7Q",
    "AUYQTK8AG",
    "28P17U46Z",
    "KHO7HTRCC",
    "TGDEI6JQH",
    "QF5B88QUQ",
    "XAWDESE3C",
    "YMJLJTEOS",
    "AIHYM53HB",
    "ST1OLXIEE",
    "E0VX3IX71",
    "86O0YC9JA",
    "QOZRVEWBN",
    "S8KR6NMSE",
    "Y7RD67YK0",
    "AASBBWJS3",
    "YZREDF207",
    "K4CTO2DPZ",
    "YP9C69U91",
    "DG2RZ411E",
    "S05L6Y3JR",
    "U1RJKQN4O",
    "ZXC6Q6PW3",
    "776HX4CGQ",
    "6G3C35FAS",
    "D6GWNNSKM",
    "XG21J8V5Q",
    "Z00XINGVO",
    "RFOOH0KGO",
    "Z3QM2JPO4",
    "KB4BK1ZYM",
    "7OZWWB1KU",
    "DVG0C79JN",
    "ITTB6M17W",
    "66OYHWC94",
    "DJ52VWABA",
    "GCEIKJ9QB",
    "ELYMRRPUB",
    "1OZUSGPQC",
    "BKKP2PZGR",
    "TZB6L5D7H",
    "ZW4C3REW2",
    "XL6OWT1XC",
    "8OHN0ZDV1",
    "GJICDXFY7",
    "YW7Y8IC10",
    "WSMPJMT2O",
    "3AYXYDQM2",
    "AOZDNMGT5",
    "T82B9L91Y",
    "FGXFBMO0R",
    "ZJ7V7QEI7",
    "UATYAZ09A",
    "RW7EE4FWM",
    "UHAY1MS2P",
    "PESOFFMC2",
    "1LCIE7MG4",
    "3YHJK8T9O",
    "Y5KRQOEAU",
    "PMW02WA81",
    "XN51RHV20",
    "8FI6WFW53",
    "O2E7WO9XY",
    "HO65CIKK4",
    "2D51RORPV",
    "JNPUUBGLU",
    "EGO9P9KAL",
    "7Q24BITI5",
    "JA3T4J43I",
    "41NCNHDE9",
    "CRVPST9OE",
    "UA8ZPQS30",
    "W0CNH14DQ",
    "U7ZQE42SA",
    "12XCAU478",
    "QGWP4MJ11",
    "TU6Y5895G",
    "PGQ55UYWD",
    "MG874TRKM",
    "7DY7WMPI3",
    "4TREW7Y0Y",
    "XIGJIV62H",
    "OJV7TUDC6",
    "7AFP86EHY",
    "LKQI1NG1J",
    "T07EHZBGD",
    "SX82XD8JF",
    "EKJXPYYS4",
    "594L0WRK3",
    "HP5B48WQB",
    "WV976JNUY",
    "SKJAXNC5C",
    "58JIS0GPN",
    "LEF09PZAK",
    "QRV3EWMRU",
    "9GVAPTDYK",
    "AU7LKELZS",
    "Y11UPQID1",
    "UF7QHA2B6",
    "UNN9EUDV7",
    "K9ATXC991",
    "HQ4AY89IW",
    "H2UQML3TD",
    "MGH83DIDN",
    "L0GQH69GP",
    "YLYP9UIWV",
    "3NNAL9K91",
    "FXJNE1EOV",
    "QFEZUYQTY",
    "M7BFXDX5B",
    "GGHXR5UYL",
    "0616VPNC2",
    "NLPNCTSCW",
    "4REI1XZ9P",
    "FZPNLR6S6",
    "MIXQ52F7C",
    "For data ",
    "P4EJVDRMK",
    "SE7TLVZKH",
    "EUUSG96HJ",
    "52XNSL9AN",
    "6X5U6SUPE",
    "6HJJPSV24",
    "ZTCXUDB5N",
    "PQZXRM6TP",
    "8GHINDXUJ",
    "DTS2J28BU",
    "HRXEJOJ03",
    "VCS6QX21M",
    "L0BHFF3P4",
    "WWQ87QNA4",
    "1TTJ87J8B",
    "D9U9WEJTP",
    "RIOF21ZLH",
    "XICMPSZ2P",
    "V46V9L4UT",
    "14RG7EQXZ",
    "BNB4WHFPY",
    "YZ3XT4ZQK",
    "650S6IKRF",
    "ANXIDLIIQ",
    "U7HTAFVXW",
    "E6G9LPTU5",
    "36314P3TT",
    "ZNDXEX4I1",
    "HQOC98X20",
    "F4IFR017Q",
    "5KTTKU57F",
    "HEZVKJI95",
    "FCANFSSZM",
    "LWT22EIMK",
    "EM8Y2OD5X",
    "01DCWS9ZE",
    "LVAU62WE3"]

const get_user = async (coupon) => {
    const doc = await db.get_one('users', ['appsumo_code', 'array-contains', coupon])
    console.log(doc)
    if (doc) {
        await db.update_one('users', doc.id, { plan: '', prev_lifetime_campaign: doc.lifetime_campaign, lifetime_campaign: '' })
    }
    const doc2 = await db.get_one('users', ['appsumo_code', 'array-contains', coupon])
    console.log(doc2)
    return doc
}

const updateUsers = async () => {
    for (const coupon of coupons) {
        await get_user(coupon)
    }
}

updateUsers()